#!/usr/bin/env python
# -*- coding: utf-8 -*-

# Author: Eric Kow
# License: BSD3

"""
STAC Swiss-Army knife modeled on the Glozz equivalent
"""

import argparse

import stac.util.cmd.filter
import stac.util.cmd.graph
import stac.util.cmd.insert
import stac.util.cmd.text
import stac.util.cmd.merge_dialogue
import stac.util.cmd.move
import stac.util.cmd.nudge
import stac.util.cmd.rename
import stac.util.cmd.rewrite

SUBCOMMANDS = [stac.util.cmd.text,
               stac.util.cmd.graph,
               stac.util.cmd.filter,
               stac.util.cmd.rename,
               stac.util.cmd.rewrite,
               stac.util.cmd.merge_dialogue,
               stac.util.cmd.nudge,
               stac.util.cmd.insert,
               stac.util.cmd.move]

def main():
    "stac-util main - parses cli args and hands off control to subcommands"

    arg_parser = argparse.ArgumentParser(description='STAC Swiss Army Knife')
    subparsers = arg_parser.add_subparsers(help='sub-command help')

    for module in SUBCOMMANDS:
        subparser = subparsers.add_parser(module.NAME,
                                          help=module.__doc__)
        module.config_argparser(subparser)

    arg_parser.add_argument('--verbose', '-v',
                            action='count',
                            default=0)
    args = arg_parser.parse_args()
    args.func(args)

main()
